#include <node.h>
#include <v8.h>

#ifdef __GNUC__
#include "gtkDialog.h"
#endif

using namespace v8;

static Dialog g_dialog;

Handle<Value> infoBox(const Arguments &args) {
	HandleScope scope;
	g_dialog.messageBox(INFO, args[0]);
	return scope.Close(String::New(""));
}

Handle<Value> warningBox(const Arguments &args) {
	HandleScope scope;
	g_dialog.messageBox(WARNING, args[0]);
	return scope.Close(String::New(""));
}

Handle<Value> questionBox(const Arguments &args) {
	HandleScope scope;
	g_dialog.messageBox(QUESTION, args[0]);
	return scope.Close(String::New(""));
}

Handle<Value> errorBox(const Arguments &args) {
	HandleScope scope;
	g_dialog.messageBox(ERROR, args[0]);
	return scope.Close(String::New(""));
}

void init(Handle<Object> exports) {
	NODE_SET_METHOD(exports, "infoBox", infoBox);
	NODE_SET_METHOD(exports, "warningBox", warningBox);
	NODE_SET_METHOD(exports, "questionBox", questionBox);
	NODE_SET_METHOD(exports, "errorBox", errorBox);
}

NODE_MODULE(dialog, init)
